{% extends "base.html" %}
{% block content %}
  <h2>Ultimi valori</h2>
  <table border="1">
    <tr><th>Data</th><th>Prezzo</th></tr>
    {% for row in data %}
      <tr><td>{{ row.date }}</td><td>{{ row.price }}</td></tr>
    {% endfor %}
  </table>

  <h2>Grafico</h2>
  <canvas id="chart"></canvas>
  <script>
    const labels = {{ data | map(attribute="date") | list | tojson }};
    const prices = {{ data | map(attribute="price") | list | tojson }};
    new Chart(document.getElementById('chart'), {
      type: 'line',
      data: {
        labels: labels,
        datasets: [{ label: 'Prezzo', data: prices }]
      }
    });
  </script>
{% endblock %}
